/*! backbone.idleTimeout - v0.1.0 - 2014-08-21 */ 
!function(a){"function"==typeof define&&define.amd&&define(["backbone","underscore"],a)}(function(a,b){function c(){b.extend(this,a.Events),this.timeout=null,this.warningFired=!1}var d="idleTimeout.actionTime";return c.prototype.init=function(c){this.options=b.defaults(c,{checkIntervalSecs:10,events:{document:"click keyup"},warningDurationSecs:840,triggerDurationSecs:900}),console.log(this.options),b.each(b.keys(this.options.events),function(c){var d="document"===c?document:c;a.$(d).on(this.options.events[c],b.bind(this.actionCallback,this))})},c.prototype.actionCallback=function(){console.log("action callback"),sessionStorage.setItem(d,(new Date).getTime())},c.prototype.checkCallback=function(){console.log("check callback");var a=parseInt(sessionStorage.getItem(d),10),b=((new Date).getTime()-new Date(a).getTime())/1e3;!this.warningFired&&b>=this.options.warningDurationSecs&&(this.trigger("warning"),this.warningFired=!0),b>=this.options.triggerDurationSecs&&this.trigger("timeout")},c.prototype.start=function(){console.log("started"),this.stop(),this.actionCallback(),console.log("options: "),console.log(this.options),this.timeout=setInterval(b.bind(this.checkCallback,this),1e3*this.options.checkIntervalSecs)},c.prototype.stop=function(){console.log("stopped"),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.warningFired=!1,sessionStorage.removeItem(d)},c});